# {{ ansible_managed }}
# supervisord - instance: {{ supervisord_instance_name }}

description "Manage supervisord instance: {{ supervisord_instance_name }}"

start on (filesystem and runlevel [2345])
stop on runlevel [!2345]

{% if supervisord_nofile %}
limit nofile {{supervisord_nofile}} {{supervisord_nofile}}
{% endif %}

respawn
respawn limit 10 5

console log

exec {{ supervisord_bin }} -c {{ supervisord_conf_file }} --nodaemon

kill timeout {{ supervisord_kill_timeout | default(60) }}
